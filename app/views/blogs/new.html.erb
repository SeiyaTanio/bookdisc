<div class = "container">
  <h1 class="h3 mb-5 fw-normal text-center">ブログ新規投稿</h1>

  <div class="mb-3">
    <%= form_with(model: @blog, url: blogs_path, class: "needs-validation", html: {novalidate: true}, local: true) do |f| %>
      <div class = "mb-3 col-6 mx-auto">
        <%= f.label :title, class: "visually-hidden" %>タイトル <span class="badge rounded-pill bg-danger mb-2">必須</span><br />
        <%= f.text_field :title, class: "form-control ", maxlength: "100", rows: "5", autofocus: true , required: true %>
        <div class="invalid-feedback">
          タイトルを入力してください
        </div>
      </div>
      <div class = "mb-3 col-6 mx-auto">
        <%= f.label :article, class: "visually-hidden" %>記事 <span class="badge rounded-pill bg-danger mb-2">必須</span><br />
        <%= f.text_area :article, class: "form-control ", style: "height: 50vh", required: true %>
        <div class="invalid-feedback">
          記事を記述してください
        </div>
      </div>
      <div class = "col-6 mx-auto">
        <%= f.submit "ブログ投稿", class:"w-100 btn btn-lg btn-primary" %>
      </div>
    <% end %>
  </div>
</div>

<script>
  (function () {
    'use strict';

    
      var forms = document.querySelectorAll('.needs-validation')

      Array.prototype.slice.call(forms)
        .forEach(function (form) {
          form.addEventListener('submit', function (event) {
            if (!form.checkValidity()) {
              event.preventDefault()
              event.stopPropagation()
            }
            form.classList.add('was-validated')
          }, false)
        })
  })()
</script>